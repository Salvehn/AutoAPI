FROM ubuntu:latest
LABEL maintainer="Salvehn"
COPY . /app
RUN echo "Installing keepalived..."
ENV TZ=Europe/Moscow
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone
RUN apt-get update && apt-get install keepalived -y && apt-get install net-tools
RUN echo "keepalived installed!"
RUN apt-get install systemd -y
RUN apt-get install haproxy -y
RUN service keepalived enable
WORKDIR ./app
RUN chmod +x master.sh
RUN ./master.sh
RUN service keepalived restart
EXPOSE 80
